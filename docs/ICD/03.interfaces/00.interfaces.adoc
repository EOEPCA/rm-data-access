= Data Access Interfaces

== Enpoints



=== Cache

==== GET Capabilities

`GET /cache/ows/wmts/1.0.0/WMTSCapabilities.xml`

===== Description

Returns the WMTS capabilities document, detailing all available tilesets, their respective grids and formats.

===== Content Type

* text/xml

===== Responses

[cols="2,3,1"]
|===
| Code | Message | Datatype

| 200
|
|

|===


==== GET Tile

`GET /cache/ows/wmts/1.0.0/{layer}/{style}/{starttime}--{endtime}/{tilematrixset}/{tilematrix}/{tilerow}/{tilecol}.{extension}``

===== Description

Returns the specified tile from the given layer in the specified style from the

===== Parameters

====== Path Parameters

[cols="2,3,1"]
|===
| Name | Description | Required

| layer
|
| X

| style
|
| X

| starttime
|
| X

| endtime
|
| X

| tilematrixset
|
| X

| tilematrix
|
| X

| tilerow
|
| X

| tilecol
|
| X

| extension
|
| X

|===

===== Content Type

* image/jpeg
* image/png

===== Responses

[cols="2,3,1"]
|===
| Code | Message | Datatype

| 200
|
|

| 404
|
|

| 500
|
|

|===


=== Renderer

==== OpenSearch Description

`GET /opensearch/`

===== Description

Returns the root OpenSearch Description document of the Renderer.

// ===== Parameters


// ====== Path Parameters


// ====== Query Parameters


===== Content Type

* application/xml

===== Responses

[cols="2,3,1"]
|===
| Code | Message | Datatype

| 200
|
|

| 404
|
|

| 500
|
|

|===

==== OpenSearch Collection Search

`GET /opensearch/{format}/`

===== Description

Performs a collection search of all collections on the Renderer using the search parameters provided.

===== Parameters


====== Path Parameters

[cols="2,3,1"]
|===
| Name | Description | Required

| format
| The format to encode the search result in. One of `atom`, `rss`, `json`, `kml`, or `html`
| X

|===

====== Query Parameters


// TODO





===== Content Type

* application/atom+xml
* application/rss+xml
* application/vnd.google-earth.kml+xml
* application/vnd.geo+json
* text/html

===== Responses

[cols="2,3,1"]
|===
| Code | Message | Datatype

| 200
|
|

| 404
|
|

| 500
|
|

|===


==== OpenSearch Collection Description

`GET /opensearch/collections/{collection}`

===== Description

Returns the description  OpenSearch Description document of the Renderer.

===== Parameters

====== Path Parameters

[cols="2,3,1"]
|===
| Name | Description | Required

| collection
| The collection to generate the description document
| X

|===

===== Content Type

* application/xml


===== Responses

[cols="2,3,1"]
|===
| Code | Message | Datatype

| 200
|
|

| 404
|
|

| 500
|
|

|===


==== OpenSearch Record Search

`GET /opensearch/collections/{collection}/{format}`

===== Description

Returns the root OpenSearch Description document of the Renderer.

===== Parameters

====== Path Parameters

[cols="2,3,1"]
|===
| Name | Description | Required

| collection
| The collection to perform the record search on
| X

| format
| The format to encode the search result in. One of `atom`, `rss`, `json`, `kml`, or `html`
| X

|===

====== Query Parameters




===== Content Type

* application/atom+xml
* application/rss+xml
* application/vnd.google-earth.kml+xml
* application/vnd.geo+json
* text/html

===== Responses

[cols="2,3,1"]
|===
| Code | Message | Datatype

| 200
|
|

| 404
|
|

| 500
|
|

|===


=== Registrar

==== Registration

`POST /registration`

===== Description

Starts the registration of the specified catalog.json.

===== Parameters

====== Header Parameters

This interface requires a valid JWT in the `Authorization` header using the `Bearer` scheme.

====== JSON Parameters

[cols="2,3,1"]
|===
| Name | Description | Required

| url
| The full S3 URL to the directory name of the catalog.json
| X

| item
| The type of the registration. Unused for now.
|

|===

===== Content Type

* application/json

===== Responses

[cols="2,3,1"]
|===
| Code | Message | Datatype

| 200
| The registration started successfully
| application/json

| 400
| Failed to start the registration of the specified catalog.json
| application/json

| 401
| Failed to authorize the JWT
| application/json

|===
